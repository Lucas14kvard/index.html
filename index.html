<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lucas 14kvard - Профиль</title>
<style>
  :root {
    --purple: #7b2ff7;
    --pink-purple: #f107a3;
    --green-btn: #4caf50;
    --bg-gray: #1e1e2f;
    --text-light: #eee;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, var(--purple), var(--pink-purple));
    color: var(--text-light);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    position: relative;
    height: 180px;
    background: #4a2a7c;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #banner {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    object-fit: cover;
    opacity: 0.4;
    cursor: pointer;
  }
  #avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid var(--pink-purple);
    object-fit: cover;
    cursor: pointer;
    position: relative;
    z-index: 1;
    transition: all 0.5s ease;
  }
  #avatar.left-top {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 70px;
    height: 70px;
    border: 3px solid var(--green-btn);
  }
  nav {
    background: #2b1e4a;
    display: flex;
    justify-content: center;
  }
  nav button {
    background: var(--green-btn);
    border: none;
    color: white;
    padding: 12px 24px;
    font-size: 16px;
    cursor: pointer;
    margin: 8px;
    border-radius: 6px;
    transition: background 0.3s;
  }
  nav button:hover, nav button.active {
    background: #36b233;
  }
  main {
    flex: 1;
    padding: 20px;
    max-width: 700px;
    margin: 0 auto;
    background: rgba(30, 30, 47, 0.7);
    border-radius: 10px;
    box-shadow: 0 0 10px #0008;
  }
  textarea, input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 6px;
    border: none;
    font-size: 16px;
  }
  .post {
    background: #3b2f6e;
    margin: 10px 0;
    padding: 12px;
    border-radius: 8px;
  }
</style>
</head>
<body>

<header>
  <img id="banner" src="" alt="Banner" title="Кликни, чтобы сменить баннер" />
  <img id="avatar" src="" alt="Аватарка" title="Кликни, чтобы сменить аватар" />
  <input type="file" id="bannerInput" accept="image/*" style="display:none" />
  <input type="file" id="avatarInput" accept="image/*" style="display:none" />
</header>

<nav>
  <button id="btnProfile" class="active">Профиль</button>
  <button id="btnGeneral">Общее</button>
  <button id="btnAdd">Добавить</button>
</nav>

<main>
  <section id="profileSection">
    <h2>Профиль</h2>
    <p><strong>Статус:</strong></p>
    <textarea id="statusText" rows="2" placeholder="Напишите ваш статус..."></textarea>
  </section>
  <section id="generalSection" style="display:none;">
    <h2>Общее</h2>
    <div id="postsContainer"></div>
  </section>
  <section id="addSection" style="display:none;">
    <h2>Добавить пост</h2>
    <textarea id="postText" rows="4" placeholder="Напишите новый пост..."></textarea>
    <button id="addPostBtn" style="margin-top:10px; background: var(--green-btn); color:#fff; border:none; padding:10px 20px; border-radius:6px; cursor:pointer;">Добавить</button>
  </section>
</main>

<script>
  const avatar = document.getElementById('avatar');
  const banner = document.getElementById('banner');
  const avatarInput = document.getElementById('avatarInput');
  const bannerInput = document.getElementById('bannerInput');

  const btnProfile = document.getElementById('btnProfile');
  const btnGeneral = document.getElementById('btnGeneral');
  const btnAdd = document.getElementById('btnAdd');

  const profileSection = document.getElementById('profileSection');
  const generalSection = document.getElementById('generalSection');
  const addSection = document.getElementById('addSection');

  const statusText = document.getElementById('statusText');
  const postsContainer = document.getElementById('postsContainer');
  const postText = document.getElementById('postText');
  const addPostBtn = document.getElementById('addPostBtn');

  // Загрузка данных из localStorage
  function loadData() {
    const savedAvatar = localStorage.getItem('avatar');
    if (savedAvatar) avatar.src = savedAvatar;
    else avatar.src = 'https://via.placeholder.com/120?text=Avatar';

    const savedBanner = localStorage.getItem('banner');
    if (savedBanner) banner.src = savedBanner;
    else banner.src = 'https://via.placeholder.com/800x180/4a2a7c/ffffff?text=Banner';

    const savedStatus = localStorage.getItem('status');
    if (savedStatus) statusText.value = savedStatus;

    const savedPosts = JSON.parse(localStorage.getItem('posts')) || [];
    postsContainer.innerHTML = '';
    savedPosts.forEach(post => {
      addPostToDOM(post);
    });
  }

  // Сохранить статус
  statusText.addEventListener('input', () => {
    localStorage.setItem('status', statusText.value);
  });

  // Открыть выбор файла аватарки
  avatar.addEventListener('click', () => {
    avatarInput.click();
  });
  avatarInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        avatar.src = e.target.result;
        localStorage.setItem('avatar', e.target.result);
      };
      reader.readAsDataURL(file);
    }
  });

  // Открыть выбор файла баннера
  banner.addEventListener('click', () => {
    bannerInput.click();
  });
  bannerInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        banner.src = e.target.result;
        localStorage.setItem('banner', e.target.result);
      };
      reader.readAsDataURL(file);
    }
  });

  // Добавление поста
  addPostBtn.addEventListener('click', () => {
    const text = postText.value.trim();
    if (!text) {
      alert('Пост не может быть пустым');
      return;
    }
    const posts = JSON.parse(localStorage.getItem('posts')) || [];
    posts.push(text);
    localStorage.setItem('posts', JSON.stringify(posts));
    addPostToDOM(text);
    postText.value = '';
    // Переключиться на вкладку Общее
    showSection('general');
  });

  function addPostToDOM(text) {
    const div = document.createElement('div');
    div.className = 'post';
    div.textContent = text;
    postsContainer.appendChild(div);
  }

  // Переключение вкладок
  function showSection(section) {
    btnProfile.classList.remove('active');
    btnGeneral.classList.remove('active');
    btnAdd.classList.remove('active');
    profileSection.style.display = 'none';
    generalSection.style.display = 'none';
    addSection.style.display = 'none';

    avatar.classList.remove('left-top');

    if (section === 'profile') {
      btnProfile.classList.add('active');
      profileSection.style.display = 'block';
      avatar.style.position = 'relative';
      avatar.style.width = '120px';
      avatar.style.height = '120px';
    } else if (section === 'general') {
      btnGeneral.classList.add('active');
      generalSection.style.display = 'block';
      avatar.classList.add('left-top');
    } else if (section === 'add') {
      btnAdd.classList.add('active');
      addSection.style.display = 'block';
      avatar.classList.add('left-top');
    }
  }

  btnProfile.addEventListener('click', () => showSection('profile'));
  btnGeneral.addEventListener('click', () => showSection('general'));
  btnAdd.addEventListener('click', () => showSection('add'));

  // Инициализация
  loadData();
  showSection('profile');
</script>

</body>
</html>
